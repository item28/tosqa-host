(function() {
  var ng;

  ng = angular.module('myApp');

  ng.directive('circuitEditor', function() {
    return {
      restrict: 'E',
      scope: {
        data: '='
      },
      link: function(scope, elem, attr) {
        var g, gadgets, gdrag, svg;
        svg = d3.select(elem[0]).append('svg').attr({
          width: 900,
          height: 400
        });
        gdrag = d3.behavior.drag().origin(Object).on('dragstart', function(d) {
          return this.parentNode.appendChild(this);
        }).on('drag', function(d) {
          d.x = d3.event.x;
          d.y = d3.event.y;
          return d3.select(this).attr({
            transform: function(d) {
              return "translate(" + d.x + "," + d.y + ")";
            }
          });
        }).on('dragend', function(d) {
          return console.log(d);
        });
        gadgets = svg.selectAll('.gadget').data(scope.data.gadgets);
        g = gadgets.enter().append('g').attr('class', 'gadget').call(gdrag);
        g.append('rect').attr({
          width: 120,
          height: 80
        });
        g.append('text').text(function(d) {
          return d.title;
        }).attr({
          x: 5,
          y: 15
        });
        return gadgets.attr({
          transform: function(d) {
            return "translate(" + d.x + "," + d.y + ")";
          }
        });
      }
    };
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2lyY2VkaXQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQSxFQUFBOztBQUFBLEVBQUEsRUFBQSxHQUFLLE9BQU8sQ0FBQyxNQUFSLENBQWUsT0FBZixDQUFMLENBQUE7O0FBQUEsRUFFQSxFQUFFLENBQUMsU0FBSCxDQUFhLGVBQWIsRUFBOEIsU0FBQSxHQUFBO1dBQzVCO0FBQUEsTUFBQSxRQUFBLEVBQVUsR0FBVjtBQUFBLE1BRUEsS0FBQSxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sR0FBTjtPQUhGO0FBQUEsTUFLQSxJQUFBLEVBQU0sU0FBQyxLQUFELEVBQVEsSUFBUixFQUFjLElBQWQsR0FBQTtBQUNKLFlBQUEsc0JBQUE7QUFBQSxRQUFBLEdBQUEsR0FBTSxFQUFFLENBQUMsTUFBSCxDQUFVLElBQUssQ0FBQSxDQUFBLENBQWYsQ0FBa0IsQ0FBQyxNQUFuQixDQUEwQixLQUExQixDQUNKLENBQUMsSUFERyxDQUNFO0FBQUEsVUFBQSxLQUFBLEVBQU8sR0FBUDtBQUFBLFVBQVksTUFBQSxFQUFRLEdBQXBCO1NBREYsQ0FBTixDQUFBO0FBQUEsUUFHQSxLQUFBLEdBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFaLENBQUEsQ0FDTixDQUFDLE1BREssQ0FDRSxNQURGLENBRU4sQ0FBQyxFQUZLLENBRUYsV0FGRSxFQUVXLFNBQUMsQ0FBRCxHQUFBO2lCQUNmLElBQUMsQ0FBQSxVQUFVLENBQUMsV0FBWixDQUF3QixJQUF4QixFQURlO1FBQUEsQ0FGWCxDQUlOLENBQUMsRUFKSyxDQUlGLE1BSkUsRUFJTSxTQUFDLENBQUQsR0FBQTtBQUNWLFVBQUEsQ0FBQyxDQUFDLENBQUYsR0FBTSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQWYsQ0FBQTtBQUFBLFVBQ0EsQ0FBQyxDQUFDLENBQUYsR0FBTSxFQUFFLENBQUMsS0FBSyxDQUFDLENBRGYsQ0FBQTtpQkFFQSxFQUFFLENBQUMsTUFBSCxDQUFVLElBQVYsQ0FBWSxDQUFDLElBQWIsQ0FBa0I7QUFBQSxZQUFBLFNBQUEsRUFBVyxTQUFDLENBQUQsR0FBQTtxQkFBUSxZQUFBLEdBQVcsQ0FBQyxDQUFDLENBQWIsR0FBZ0IsR0FBaEIsR0FBa0IsQ0FBQyxDQUFDLENBQXBCLEdBQXVCLElBQS9CO1lBQUEsQ0FBWDtXQUFsQixFQUhVO1FBQUEsQ0FKTixDQVFOLENBQUMsRUFSSyxDQVFGLFNBUkUsRUFRUyxTQUFDLENBQUQsR0FBQTtpQkFDYixPQUFPLENBQUMsR0FBUixDQUFZLENBQVosRUFEYTtRQUFBLENBUlQsQ0FIUixDQUFBO0FBQUEsUUFjQSxPQUFBLEdBQVUsR0FBRyxDQUFDLFNBQUosQ0FBYyxTQUFkLENBQXdCLENBQUMsSUFBekIsQ0FBOEIsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUF6QyxDQWRWLENBQUE7QUFBQSxRQWdCQSxDQUFBLEdBQUksT0FBTyxDQUFDLEtBQVIsQ0FBQSxDQUFlLENBQUMsTUFBaEIsQ0FBdUIsR0FBdkIsQ0FBMkIsQ0FBQyxJQUE1QixDQUFpQyxPQUFqQyxFQUEwQyxRQUExQyxDQUFtRCxDQUFDLElBQXBELENBQXlELEtBQXpELENBaEJKLENBQUE7QUFBQSxRQWlCQSxDQUFDLENBQUMsTUFBRixDQUFTLE1BQVQsQ0FDRSxDQUFDLElBREgsQ0FDUTtBQUFBLFVBQUEsS0FBQSxFQUFPLEdBQVA7QUFBQSxVQUFZLE1BQUEsRUFBUSxFQUFwQjtTQURSLENBakJBLENBQUE7QUFBQSxRQW1CQSxDQUFDLENBQUMsTUFBRixDQUFTLE1BQVQsQ0FBZ0IsQ0FBQyxJQUFqQixDQUFzQixTQUFDLENBQUQsR0FBQTtpQkFBTyxDQUFDLENBQUMsTUFBVDtRQUFBLENBQXRCLENBQ0UsQ0FBQyxJQURILENBQ1E7QUFBQSxVQUFBLENBQUEsRUFBRyxDQUFIO0FBQUEsVUFBTSxDQUFBLEVBQUcsRUFBVDtTQURSLENBbkJBLENBQUE7ZUFzQkEsT0FBTyxDQUFDLElBQVIsQ0FBYTtBQUFBLFVBQUEsU0FBQSxFQUFXLFNBQUMsQ0FBRCxHQUFBO21CQUFRLFlBQUEsR0FBVyxDQUFDLENBQUMsQ0FBYixHQUFnQixHQUFoQixHQUFrQixDQUFDLENBQUMsQ0FBcEIsR0FBdUIsSUFBL0I7VUFBQSxDQUFYO1NBQWIsRUF2Qkk7TUFBQSxDQUxOO01BRDRCO0VBQUEsQ0FBOUIsQ0FGQSxDQUFBO0FBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJuZyA9IGFuZ3VsYXIubW9kdWxlICdteUFwcCdcblxubmcuZGlyZWN0aXZlICdjaXJjdWl0RWRpdG9yJywgLT5cbiAgcmVzdHJpY3Q6ICdFJ1xuICBcbiAgc2NvcGU6XG4gICAgZGF0YTogJz0nXG4gICAgXG4gIGxpbms6IChzY29wZSwgZWxlbSwgYXR0cikgLT5cbiAgICBzdmcgPSBkMy5zZWxlY3QoZWxlbVswXSkuYXBwZW5kICdzdmcnXG4gICAgICAuYXR0ciB3aWR0aDogOTAwLCBoZWlnaHQ6IDQwMFxuICAgIFxuICAgIGdkcmFnID0gZDMuYmVoYXZpb3IuZHJhZygpXG4gICAgICAub3JpZ2luIE9iamVjdFxuICAgICAgLm9uICdkcmFnc3RhcnQnLCAoZCkgLT5cbiAgICAgICAgQHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQgQCAjIHB1dCB0aGlzIGdhZGdldCBvbiB0b3BcbiAgICAgIC5vbiAnZHJhZycsIChkKSAtPlxuICAgICAgICBkLnggPSBkMy5ldmVudC54XG4gICAgICAgIGQueSA9IGQzLmV2ZW50LnlcbiAgICAgICAgZDMuc2VsZWN0KEApLmF0dHIgdHJhbnNmb3JtOiAoZCkgLT4gXCJ0cmFuc2xhdGUoI3tkLnh9LCN7ZC55fSlcIlxuICAgICAgLm9uICdkcmFnZW5kJywgKGQpIC0+XG4gICAgICAgIGNvbnNvbGUubG9nIGQgIyBUT0RPOiBzYXZlIHRvIHNlcnZlclxuXG4gICAgZ2FkZ2V0cyA9IHN2Zy5zZWxlY3RBbGwoJy5nYWRnZXQnKS5kYXRhKHNjb3BlLmRhdGEuZ2FkZ2V0cylcbiAgXG4gICAgZyA9IGdhZGdldHMuZW50ZXIoKS5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdnYWRnZXQnKS5jYWxsKGdkcmFnKVxuICAgIGcuYXBwZW5kKCdyZWN0JylcbiAgICAgIC5hdHRyIHdpZHRoOiAxMjAsIGhlaWdodDogODBcbiAgICBnLmFwcGVuZCgndGV4dCcpLnRleHQgKGQpIC0+IGQudGl0bGVcbiAgICAgIC5hdHRyIHg6IDUsIHk6IDE1XG5cbiAgICBnYWRnZXRzLmF0dHIgdHJhbnNmb3JtOiAoZCkgLT4gXCJ0cmFuc2xhdGUoI3tkLnh9LCN7ZC55fSlcIlxuIl19
