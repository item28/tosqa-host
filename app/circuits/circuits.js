(function() {
  var circuitsCtrl, ng;

  ng = angular.module('myApp');

  ng.config(function($stateProvider, navbarProvider) {
    $stateProvider.state('circuits', {
      url: '/circuits',
      templateUrl: '/circuits/circuits.html',
      controller: circuitsCtrl
    });
    return navbarProvider.add('/circuits', 'Circuits', 30);
  });

  circuitsCtrl = function($scope, jeebus) {
    var g, p, _i, _j, _len, _len1, _ref, _ref1;
    $scope.gadgets = {
      Pipe: {
        name: 'Pipeline',
        width: 160,
        shade: 'lightyellow',
        icon: '\uf061',
        pins: [
          {
            name: 'In',
            dir: 'in'
          }, {
            name: 'Out',
            dir: 'out'
          }
        ]
      },
      Printer: {
        width: 120,
        shade: 'lightblue',
        icon: '\uf02f',
        pins: [
          {
            name: 'In',
            dir: 'in'
          }, {
            name: 'In2',
            dir: 'in'
          }
        ]
      }
    };
    $scope.circuit = {
      gadgets: [
        {
          id: 'g1',
          x: 120,
          y: 100,
          title: 'Gadget One',
          type: 'Printer'
        }, {
          id: 'g2',
          x: 120,
          y: 200,
          title: 'Gadget Two',
          type: 'Pipe'
        }
      ],
      wires: [
        {
          from: 'g2.Out',
          to: 'g1.In',
          cap: 0
        }
      ],
      feeds: {
        'g1.In': [
          'some data', {
            Tag: 'blah',
            Msg: 'tagged data'
          }
        ]
      },
      labels: {
        In: 'g2.In'
      }
    };
    $scope.inputPins = [];
    _ref = $scope.circuit.gadgets;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      g = _ref[_i];
      _ref1 = $scope.gadgets[g.type].pins;
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        p = _ref1[_j];
        if (p.dir === 'in') {
          $scope.inputPins.push("" + g.id + "." + p.name);
        }
      }
    }
    $scope.inputPins.sort();
    $scope.$watch('addPin', function(pin) {
      var _base;
      if (pin) {
        if ((_base = $scope.circuit.feeds)[pin] == null) {
          _base[pin] = [];
        }
        console.log('addFeed', pin, $scope.circuit.feeds[pin].length);
        $scope.circuit.feeds[pin].push('');
        return $scope.addPin = null;
      }
    });
    $scope.delFeed = function(pin, index) {
      var items;
      items = $scope.circuit.feeds[pin];
      console.log('delFeed', pin, index, items[index]);
      items.splice(index, 1);
      if (items.length === 0) {
        return delete $scope.circuit.feeds[pin];
      }
    };
    $scope.$watch('currSel.id', function(x) {
      return console.log('fix id', x);
    });
    return $scope.$watch('currSel.title', function(x) {
      return console.log('fix title', x);
    });
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2lyY3VpdHMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQSxnQkFBQTs7QUFBQSxFQUFBLEVBQUEsR0FBSyxPQUFPLENBQUMsTUFBUixDQUFlLE9BQWYsQ0FBTCxDQUFBOztBQUFBLEVBRUEsRUFBRSxDQUFDLE1BQUgsQ0FBVSxTQUFDLGNBQUQsRUFBaUIsY0FBakIsR0FBQTtBQUNSLElBQUEsY0FBYyxDQUFDLEtBQWYsQ0FBcUIsVUFBckIsRUFDRTtBQUFBLE1BQUEsR0FBQSxFQUFLLFdBQUw7QUFBQSxNQUNBLFdBQUEsRUFBYSx5QkFEYjtBQUFBLE1BRUEsVUFBQSxFQUFZLFlBRlo7S0FERixDQUFBLENBQUE7V0FJQSxjQUFjLENBQUMsR0FBZixDQUFtQixXQUFuQixFQUFnQyxVQUFoQyxFQUE0QyxFQUE1QyxFQUxRO0VBQUEsQ0FBVixDQUZBLENBQUE7O0FBQUEsRUFTQSxZQUFBLEdBQWUsU0FBQyxNQUFELEVBQVMsTUFBVCxHQUFBO0FBQ2IsUUFBQSxzQ0FBQTtBQUFBLElBQUEsTUFBTSxDQUFDLE9BQVAsR0FDRTtBQUFBLE1BQUEsSUFBQSxFQUNFO0FBQUEsUUFBQSxJQUFBLEVBQU0sVUFBTjtBQUFBLFFBQ0EsS0FBQSxFQUFPLEdBRFA7QUFBQSxRQUVBLEtBQUEsRUFBTyxhQUZQO0FBQUEsUUFHQSxJQUFBLEVBQU0sUUFITjtBQUFBLFFBSUEsSUFBQSxFQUFNO1VBQ0o7QUFBQSxZQUFFLElBQUEsRUFBTSxJQUFSO0FBQUEsWUFBYyxHQUFBLEVBQUssSUFBbkI7V0FESSxFQUVKO0FBQUEsWUFBRSxJQUFBLEVBQU0sS0FBUjtBQUFBLFlBQWUsR0FBQSxFQUFLLEtBQXBCO1dBRkk7U0FKTjtPQURGO0FBQUEsTUFTQSxPQUFBLEVBQ0U7QUFBQSxRQUFBLEtBQUEsRUFBTyxHQUFQO0FBQUEsUUFDQSxLQUFBLEVBQU8sV0FEUDtBQUFBLFFBRUEsSUFBQSxFQUFNLFFBRk47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QUFOLEtBQWdCLENBQXJEO2VBQUEsTUFBQSxDQUFBLE1BQWEsQ0FBQyxPQUFPLENBQUMsS0FBTSxDQUFBLEdBQUEsRUFBNUI7T0FKZTtJQUFBLENBN0NqQixDQUFBO0FBQUEsSUFtREEsTUFBTSxDQUFDLE1BQVAsQ0FBYyxZQUFkLEVBQTRCLFNBQUMsQ0FBRCxHQUFBO2FBQzFCLE9BQU8sQ0FBQyxHQUFSLENBQVksUUFBWixFQUFzQixDQUF0QixFQUQwQjtJQUFBLENBQTVCLENBbkRBLENBQUE7V0FxREEsTUFBTSxDQUFDLE1BQVAsQ0FBYyxlQUFkLEVBQStCLFNBQUMsQ0FBRCxHQUFBO2FBQzdCLE9BQU8sQ0FBQyxHQUFSLENBQVksV0FBWixFQUF5QixDQUF6QixFQUQ2QjtJQUFBLENBQS9CLEVBdERhO0VBQUEsQ0FUZixDQUFBO0FBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJuZyA9IGFuZ3VsYXIubW9kdWxlICdteUFwcCdcblxubmcuY29uZmlnICgkc3RhdGVQcm92aWRlciwgbmF2YmFyUHJvdmlkZXIpIC0+XG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlICdjaXJjdWl0cycsXG4gICAgdXJsOiAnL2NpcmN1aXRzJ1xuICAgIHRlbXBsYXRlVXJsOiAnL2NpcmN1aXRzL2NpcmN1aXRzLmh0bWwnXG4gICAgY29udHJvbGxlcjogY2lyY3VpdHNDdHJsXG4gIG5hdmJhclByb3ZpZGVyLmFkZCAnL2NpcmN1aXRzJywgJ0NpcmN1aXRzJywgMzBcblxuY2lyY3VpdHNDdHJsID0gKCRzY29wZSwgamVlYnVzKSAtPlxuICAkc2NvcGUuZ2FkZ2V0cyA9XG4gICAgUGlwZTpcbiAgICAgIG5hbWU6ICdQaXBlbGluZSdcbiAgICAgIHdpZHRoOiAxNjBcbiAgICAgIHNoYWRlOiAnbGlnaHR5ZWxsb3cnXG4gICAgICBpY29uOiAnXFx1ZjA2MScgIyBmYS1hcnJvdy1yaWdodFxuICAgICAgcGluczogW1xuICAgICAgICB7IG5hbWU6ICdJbicsIGRpcjogJ2luJyB9XG4gICAgICAgIHsgbmFtZTogJ091dCcsIGRpcjogJ291dCcgfVxuICAgICAgXVxuICAgIFByaW50ZXI6XG4gICAgICB3aWR0aDogMTIwXG4gICAgICBzaGFkZTogJ2xpZ2h0Ymx1ZSdcbiAgICAgIGljb246ICdcXHVmMDJmJyAjIGZhLXByaW50XG4gICAgICBwaW5zOiBbXG4gICAgICAgIHsgbmFtZTogJ0luJywgZGlyOiAnaW4nIH1cbiAgICAgICAgeyBuYW1lOiAnSW4yJywgZGlyOiAnaW4nIH1cbiAgICAgIF1cbiAgICAgIFxuICAkc2NvcGUuY2lyY3VpdCA9XG4gICAgZ2FkZ2V0czogW1xuICAgICAgeyBpZDogJ2cxJywgeDogMTIwLCB5OiAxMDAsIHRpdGxlOiAnR2FkZ2V0IE9uZScsIHR5cGU6ICdQcmludGVyJyB9XG4gICAgICB7IGlkOiAnZzInLCB4OiAxMjAsIHk6IDIwMCwgdGl0bGU6ICdHYWRnZXQgVHdvJywgdHlwZTogJ1BpcGUnIH1cbiAgICBdXG4gICAgd2lyZXM6IFtcbiAgICAgIHsgZnJvbTogJ2cyLk91dCcsIHRvOiAnZzEuSW4nLCBjYXA6IDAgfVxuICAgIF1cbiAgICBmZWVkczpcbiAgICAgICdnMS5Jbic6IFsgJ3NvbWUgZGF0YScsIHsgVGFnOiAnYmxhaCcsIE1zZzogJ3RhZ2dlZCBkYXRhJyB9IF1cbiAgICBsYWJlbHM6XG4gICAgICBJbjogJ2cyLkluJ1xuICAgICAgXG4gICRzY29wZS5pbnB1dFBpbnMgPSBbXVxuICBmb3IgZyBpbiAkc2NvcGUuY2lyY3VpdC5nYWRnZXRzXG4gICAgZm9yIHAgaW4gJHNjb3BlLmdhZGdldHNbZy50eXBlXS5waW5zIHdoZW4gcC5kaXIgaXMgJ2luJ1xuICAgICAgJHNjb3BlLmlucHV0UGlucy5wdXNoIFwiI3tnLmlkfS4je3AubmFtZX1cIlxuICAkc2NvcGUuaW5wdXRQaW5zLnNvcnQoKVxuICBcbiAgJHNjb3BlLiR3YXRjaCAnYWRkUGluJywgKHBpbikgLT5cbiAgICBpZiBwaW5cbiAgICAgICRzY29wZS5jaXJjdWl0LmZlZWRzW3Bpbl0gPz0gW11cbiAgICAgIGNvbnNvbGUubG9nICdhZGRGZWVkJywgcGluLCAkc2NvcGUuY2lyY3VpdC5mZWVkc1twaW5dLmxlbmd0aFxuICAgICAgJHNjb3BlLmNpcmN1aXQuZmVlZHNbcGluXS5wdXNoICcnXG4gICAgICAkc2NvcGUuYWRkUGluID0gbnVsbFxuICAgIFxuICAkc2NvcGUuZGVsRmVlZCA9IChwaW4sIGluZGV4KSAtPlxuICAgIGl0ZW1zID0gJHNjb3BlLmNpcmN1aXQuZmVlZHNbcGluXVxuICAgIGNvbnNvbGUubG9nICdkZWxGZWVkJywgcGluLCBpbmRleCwgaXRlbXNbaW5kZXhdXG4gICAgaXRlbXMuc3BsaWNlIGluZGV4LCAxXG4gICAgZGVsZXRlICRzY29wZS5jaXJjdWl0LmZlZWRzW3Bpbl0gIGlmIGl0ZW1zLmxlbmd0aCBpcyAwXG4gIFxuICAkc2NvcGUuJHdhdGNoICdjdXJyU2VsLmlkJywgKHgpIC0+XG4gICAgY29uc29sZS5sb2cgJ2ZpeCBpZCcsIHhcbiAgJHNjb3BlLiR3YXRjaCAnY3VyclNlbC50aXRsZScsICh4KSAtPlxuICAgIGNvbnNvbGUubG9nICdmaXggdGl0bGUnLCB4XG4gICAgXG4gICMgc2V0dXAgPSAtPlxuICAjICAgamVlYnVzLmF0dGFjaCAnY2lyY3VpdCdcbiAgIyAgICAgLm9uICdzeW5jJywgLT5cbiAgIyAgICAgICAkc2NvcGUuY2lyY3VpdHMgPSBAcm93c1xuICAjICAgICBcbiAgIyBzZXR1cCgpICBpZiAkc2NvcGUuc2VydmVyU3RhdHVzIGlzICdjb25uZWN0ZWQnXG4gICMgJHNjb3BlLiRvbiAnd3Mtb3BlbicsIHNldHVwXG4iXX0=
